<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;Gym Tracker Pro v4&lt;/title&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;link rel="manifest" href="./manifest.json" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;meta name="theme-color" content="#09090b" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;meta name="apple-mobile-web-app-capable" content="yes" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;meta name="apple-mobile-web-app-title" content="Gym Tracker" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;link rel="apple-touch-icon" href="./icons/apple-touch-icon.png" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;link rel="icon" sizes="32x32" href="./icons/icon-32.png" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;link rel="icon" sizes="192x192" href="./icons/icon-192.png" /&gt;</span></p>
<p class="p1"><span class="s1">&lt;link rel="icon" sizes="512x512" href="./icons/icon-512.png" /&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;body class="bg-zinc-950 text-zinc-100"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="root"&gt;&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const { useEffect, useMemo, useState } = React;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>// --------- utils ----------</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const uid = () =&gt; Math.random().toString(16).slice(2) + Date.now().toString(16);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const todayISO = () =&gt; new Date().toISOString().slice(0, 10);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const toNum = (v) =&gt; (v === "" || v === null || v === undefined ? null : Number(v));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const safe = (n, fallback = 0) =&gt; (Number.isFinite(n) ? n : fallback);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function load(key, fallback) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const raw = localStorage.getItem(key);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return raw ? JSON.parse(raw) : fallback;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>} catch {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return fallback;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function save(key, value) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>localStorage.setItem(key, JSON.stringify(value));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function startOfWeekISO(dateISO) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const d = new Date(dateISO + "T00:00:00");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const day = (d.getDay() + 6) % 7; // Mon=0..Sun=6</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>d.setDate(d.getDate() - day);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return d.toISOString().slice(0, 10);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function addDaysISO(dateISO, days) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const d = new Date(dateISO + "T00:00:00");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>d.setDate(d.getDate() + days);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return d.toISOString().slice(0, 10);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function inWeek(dateISO, weekStartISO) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return dateISO &gt;= weekStartISO &amp;&amp; dateISO &lt;= addDaysISO(weekStartISO, 6);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function weekdayIndexMon0(dateISO) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const d = new Date(dateISO + "T00:00:00");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return (d.getDay() + 6) % 7; // Mon=0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function volumeForSet(set) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const reps = toNum(set.reps);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weight = toNum(set.weight);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (reps == null || weight == null) return 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return reps * weight;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function volumeForExercise(ex) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return (ex.sets || []).reduce((acc, s) =&gt; acc + volumeForSet(s), 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function countedSets(ex) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return (ex.sets || []).filter((s) =&gt; (toNum(s.reps) ?? 0) &gt; 0).length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const MUSCLES = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>"Chest","Back","Shoulders","Biceps","Triceps","Quads","Hamstrings","Glutes","Calves","Abs","Other"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>// --------- UI components ----------</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Card({ children }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{ className: "rounded-2xl bg-zinc-900/60 border border-zinc-800 shadow p-4 md:p-5" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>children</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Label({ children }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement("div", { className: "text-xs text-zinc-400 mb-1" }, children);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Input(props) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement("input", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>...props,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600 " +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>(props.className || ""),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function TextArea(props) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement("textarea", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>...props,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600 " +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>(props.className || ""),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Button({ children, variant = "primary", ...props }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const styles =</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>variant === "primary"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>? "bg-zinc-100 text-zinc-950 hover:bg-white"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>: variant === "ghost"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>? "bg-transparent border border-zinc-800 hover:bg-zinc-900"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>: "bg-red-500/90 hover:bg-red-500 text-white";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>"button",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...props,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"rounded-xl px-3 py-2 text-sm font-medium transition active:scale-[0.99] disabled:opacity-50 " +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>styles +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>" " +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>(props.className || ""),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>children</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Pill({ active, children, onClick }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>"button",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>onClick,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"px-3 py-1.5 rounded-full text-sm border transition " +</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>(active</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>? "bg-zinc-100 text-zinc-950 border-zinc-100"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>: "bg-transparent text-zinc-200 border-zinc-800 hover:bg-zinc-900"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>children</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function Empty({ title, hint }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{ className: "text-center py-10 text-zinc-400" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>React.createElement("div", { className: "text-zinc-200 font-semibold" }, title),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>React.createElement("div", { className: "text-sm mt-1" }, hint)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>// --------- progression logic (1kg jumps) ----------</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function suggestNextWeight({ lastWeight, hitTargetAllSets, missByALot }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (lastWeight == null) return null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (hitTargetAllSets) return +(lastWeight + 1).toFixed(1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>if (missByALot) return +(Math.max(0, lastWeight - 1)).toFixed(1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return lastWeight;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>// --------- default splits ----------</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function defaultSplits() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>name: "PPL (6 days)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>days: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Push", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Pull", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Legs", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Push", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Pull", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Legs", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>name: "Upper / Lower (4 days)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>days: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Upper", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Lower", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Upper", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Lower", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>name: "Full Body (3 days)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>days: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Full Body", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Full Body", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Full Body", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Rest", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>function App() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const STORAGE_KEY = "gym_tracker_pro_v4";</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [state, setState] = useState(() =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>load(STORAGE_KEY, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>exerciseLibrary: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"Bench Press": { muscle: "Chest" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"Incline DB Press": { muscle: "Chest" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"Lat Pulldown": { muscle: "Back" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"Seated Row": { muscle: "Back" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"Squat": { muscle: "Quads" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"RDL": { muscle: "Hamstrings" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>templates: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>name: "Upper (Strength)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>type: "strength",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>exercises: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Bench Press", repTarget: 8 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Incline DB Press", repTarget: 10 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Lat Pulldown", repTarget: 10 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Seated Row", repTarget: 10 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>name: "Lower (Strength)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>type: "strength",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>exercises: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Squat", repTarget: 6 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "RDL", repTarget: 8 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Leg Press", repTarget: 10 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ id: uid(), name: "Calf Raises", repTarget: 12 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>name: "Zone 2 Cardio",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>type: "cardio",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>cardio: { modality: "Bike", minutes: 30, distanceKm: "" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splits: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>activeSplitId: null,</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// ✅ NEW: settings</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settings: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>splitMode: "calendar", // "calendar" | "cycle"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// ✅ NEW: cycle position per split</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splitCycleIndexBySplitId: {},</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>sessions: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>macroEntries: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>bodyEntries: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// init splits if empty</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>useEffect(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (s.splits &amp;&amp; s.splits.length) return s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const splits = defaultSplits();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const activeSplitId = splits[0]?.id || null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { ...s, splits, activeSplitId };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, []);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>useEffect(() =&gt; save(STORAGE_KEY, state), [state]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tab, setTab] = useState("sessions"); // sessions | templates | split | settings | history | macros | body | weekly</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [weekStart, setWeekStart] = useState(startOfWeekISO(todayISO()));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- helpers ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function ensureLibraryForExercise(name, muscle) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const key = (name || "").trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!key) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const prev = s.exerciseLibrary?.[key];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (prev &amp;&amp; prev.muscle) return s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { ...s, exerciseLibrary: { ...(s.exerciseLibrary || {}), [key]: { muscle: muscle || "Other" } } };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updateSession(id, updater) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>sessions: s.sessions.map((x) =&gt; (x.id === id ? updater(x) : x)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteSession(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({ ...s, sessions: s.sessions.filter((x) =&gt; x.id !== id) }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const sortedSessions = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return [...state.sessions].sort((a, b) =&gt; (a.date &lt; b.date ? 1 : -1));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.sessions]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- active split ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const activeSplit = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return (state.splits || []).find((sp) =&gt; sp.id === state.activeSplitId) || null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.splits, state.activeSplitId]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// cycle index helpers</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function getCycleIndexForActiveSplit() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const sid = state.activeSplitId;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!sid) return 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return safe(state.splitCycleIndexBySplitId?.[sid], 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function setCycleIndexForActiveSplit(nextIndex) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const sid = state.activeSplitId;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!sid) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splitCycleIndexBySplitId: { ...(s.splitCycleIndexBySplitId || {}), [sid]: nextIndex },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function normalizeSplitDays(split) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const days = split?.days || [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ensure at least 1 day</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return days.length ? days : [{ id: uid(), name: "Day 1", templateIds: [] }];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Today’s Plan (calendar OR cycle) ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const plan = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!activeSplit) return null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const days = normalizeSplitDays(activeSplit);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const mode = state.settings?.splitMode || "calendar";</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (mode === "calendar") {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// if user kept 7 days, this maps nicely. If not 7, we wrap.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const idx = weekdayIndexMon0(todayISO()) % days.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const day = days[idx];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const templates = (day.templateIds || [])</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.map((id) =&gt; state.templates.find((t) =&gt; t.id === id))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.filter(Boolean);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const weekdayLabel = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][weekdayIndexMon0(todayISO())];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { mode, title: `${weekdayLabel}: ${day.name}`, dayIndex: idx, dayCount: days.length, day, templates };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// cycle mode</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const idx = getCycleIndexForActiveSplit() % days.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const day = days[idx];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const templates = (day.templateIds || [])</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.map((id) =&gt; state.templates.find((t) =&gt; t.id === id))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.filter(Boolean);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return { mode, title: `Cycle Day ${idx + 1} of ${days.length}: ${day.name}`, dayIndex: idx, dayCount: days.length, day, templates };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [activeSplit, state.settings, state.templates, state.splitCycleIndexBySplitId]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function addSessionFromTemplate(tplId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const tpl = state.templates.find((t) =&gt; t.id === tplId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!tpl) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (tpl.type === "strength") {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sess = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>date: todayISO(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>name: tpl.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>type: "strength",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>notes: "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>exercises: (tpl.exercises || []).map((e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>const muscle = state.exerciseLibrary?.[e.name]?.muscle || "Other";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>return {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>name: e.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>muscle,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>repTarget: e.repTarget ?? 8,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>sets: [{ id: uid(), reps: "", weight: "", rpe: "" }],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setState((s) =&gt; ({ ...s, sessions: [sess, ...s.sessions] }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sess = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>date: todayISO(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>name: tpl.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>type: "cardio",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>notes: "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>cardio: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>modality: tpl.cardio?.modality || "Run",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>minutes: tpl.cardio?.minutes ?? 30,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>distanceKm: tpl.cardio?.distanceKm ?? "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>intensity: "Zone 2",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setState((s) =&gt; ({ ...s, sessions: [sess, ...s.sessions] }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setTab("sessions");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Templates ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplType, setTplType] = useState("strength");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplName, setTplName] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplExercises, setTplExercises] = useState("Bench Press,8,Chest\nRow,10,Back\nSquat,6,Quads");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplCardioMod, setTplCardioMod] = useState("Bike");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplCardioMin, setTplCardioMin] = useState("30");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [tplCardioDist, setTplCardioDist] = useState("");</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function addTemplate() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const name = tplName.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!name) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (tplType === "strength") {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const lines = tplExercises</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.split("\n")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.map((x) =&gt; x.trim())</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.filter(Boolean)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.map((line) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const parts = line.split(",").map((s) =&gt; s.trim());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const n = parts[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const rt = toNum(parts[1]) ?? 8;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const muscle = MUSCLES.includes(parts[2]) ? parts[2] : "Other";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return { name: n, repTarget: rt, muscle };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>.filter((x) =&gt; x.name);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (lines.length === 0) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>lines.forEach((x) =&gt; ensureLibraryForExercise(x.name, x.muscle));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const tpl = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>type: "strength",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>exercises: lines.map((x) =&gt; ({ id: uid(), name: x.name, repTarget: x.repTarget })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setState((s) =&gt; ({ ...s, templates: [tpl, ...s.templates] }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const tpl = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>type: "cardio",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>cardio: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>modality: tplCardioMod,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>minutes: toNum(tplCardioMin) ?? 30,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>distanceKm: tplCardioDist,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setState((s) =&gt; ({ ...s, templates: [tpl, ...s.templates] }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setTplName("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteTemplate(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>templates: s.templates.filter((t) =&gt; t.id !== id),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splits: (s.splits || []).map((sp) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>...sp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>days: (sp.days || []).map((d) =&gt; ({ ...d, templateIds: (d.templateIds || []).filter((tid) =&gt; tid !== id) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Splits ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [newSplitName, setNewSplitName] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function createSplit() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const name = newSplitName.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!name) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const sp = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>id: uid(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>days: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 1", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 2", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 3", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 4", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 5", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 6", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ id: uid(), name: "Day 7", templateIds: [] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splits: [sp, ...(s.splits || [])],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>activeSplitId: sp.id,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splitCycleIndexBySplitId: { ...(s.splitCycleIndexBySplitId || {}), [sp.id]: 0 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setNewSplitName("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteSplit(splitId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const next = (s.splits || []).filter((sp) =&gt; sp.id !== splitId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const nextActive = s.activeSplitId === splitId ? (next[0]?.id || null) : s.activeSplitId;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const nextCycle = { ...(s.splitCycleIndexBySplitId || {}) };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>delete nextCycle[splitId];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { ...s, splits: next, activeSplitId: nextActive, splitCycleIndexBySplitId: nextCycle };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updateSplit(splitId, updater) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>splits: (s.splits || []).map((sp) =&gt; (sp.id === splitId ? updater(sp) : sp)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Exercise history ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const exerciseNames = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const set = new Set();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>for (const sess of state.sessions) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (sess.type === "strength" &amp;&amp; sess.strength) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>for (const ex of sess.strength.exercises || []) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const n = (ex.name || "").trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (n) set.add(n);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return [...set].sort((a, b) =&gt; a.localeCompare(b));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.sessions]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [historyExercise, setHistoryExercise] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [historySearch, setHistorySearch] = useState("");</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const historyRows = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!historyExercise) return [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const rows = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>for (const sess of state.sessions) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (sess.type !== "strength" || !sess.strength) continue;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const ex = (sess.strength.exercises || []).find((e) =&gt; (e.name || "").trim() === historyExercise);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (!ex) continue;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sets = ex.sets || [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const bestWeight = Math.max(...sets.map((s) =&gt; safe(toNum(s.weight), 0)), 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const bestReps = Math.max(...sets.map((s) =&gt; safe(toNum(s.reps), 0)), 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>rows.push({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>date: sess.date,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>session: sess.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>bestWeight,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>bestReps,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>volume: Math.round(volumeForExercise(ex)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>setsCount: countedSets(ex),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>repTarget: toNum(ex.repTarget) ?? 8,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return rows.sort((a, b) =&gt; (a.date &lt; b.date ? 1 : -1)).slice(0, 20);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.sessions, historyExercise]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const historySuggestion = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!historyExercise || historyRows.length === 0) return null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const latestDate = historyRows[0].date;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const latestSessName = historyRows[0].session;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const sess = state.sessions.find((s) =&gt; s.date === latestDate &amp;&amp; s.name === latestSessName &amp;&amp; s.type === "strength");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!sess?.strength) return null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const ex = sess.strength.exercises.find((e) =&gt; (e.name || "").trim() === historyExercise);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (!ex) return null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const target = toNum(ex.repTarget) ?? 8;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const repsNums = (ex.sets || []).map((x) =&gt; toNum(x.reps)).filter((x) =&gt; x != null);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const weights = (ex.sets || []).map((x) =&gt; toNum(x.weight)).filter((x) =&gt; x != null);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const lastWeight = weights.length ? weights[weights.length - 1] : null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const hit = repsNums.length &gt; 0 &amp;&amp; repsNums.every((r) =&gt; r &gt;= target);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const miss = repsNums.length &gt; 0 &amp;&amp; repsNums.some((r) =&gt; r &lt;= Math.max(1, target - 4));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const next = suggestNextWeight({ lastWeight, hitTargetAllSets: hit, missByALot: miss });</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (lastWeight == null || next == null) return null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return { lastWeight, next };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [historyExercise, historyRows, state.sessions]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Macros ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [macroDate, setMacroDate] = useState(todayISO());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [cal, setCal] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [p, setP] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [c, setC] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [f, setF] = useState("");</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const sortedMacros = useMemo(() =&gt; [...state.macroEntries].sort((a, b) =&gt; (a.date &lt; b.date ? 1 : -1)), [state.macroEntries]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function upsertMacros() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const entry = { id: uid(), date: macroDate, calories: toNum(cal), protein: toNum(p), carbs: toNum(c), fat: toNum(f) };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const existing = s.macroEntries.find((m) =&gt; m.date === macroDate);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const next = existing</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>? s.macroEntries.map((m) =&gt; (m.date === macroDate ? { ...m, ...entry, id: m.id } : m))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>: [entry, ...s.macroEntries];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { ...s, macroEntries: next };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteMacro(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({ ...s, macroEntries: s.macroEntries.filter((m) =&gt; m.id !== id) }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Body ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [bodyDate, setBodyDate] = useState(todayISO());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [weight, setWeight] = useState("");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const [bf, setBf] = useState("");</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const sortedBody = useMemo(() =&gt; [...state.bodyEntries].sort((a, b) =&gt; (a.date &lt; b.date ? 1 : -1)), [state.bodyEntries]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function upsertBody() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const entry = { id: uid(), date: bodyDate, weightKg: toNum(weight), bodyFatPct: toNum(bf) };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const existing = s.bodyEntries.find((e) =&gt; e.date === bodyDate);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const next = existing</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>? s.bodyEntries.map((e) =&gt; (e.date === bodyDate ? { ...e, ...entry, id: e.id } : e))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>: [entry, ...s.bodyEntries];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { ...s, bodyEntries: next };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteBody(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>setState((s) =&gt; ({ ...s, bodyEntries: s.bodyEntries.filter((e) =&gt; e.id !== id) }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Weekly summary ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weekSessions = useMemo(() =&gt; state.sessions.filter((s) =&gt; inWeek(s.date, weekStart)), [state.sessions, weekStart]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weeklyStrength = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const strengthSessions = weekSessions.filter((s) =&gt; s.type === "strength" &amp;&amp; s.strength);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>let totalVolume = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>let totalSetCount = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const byMuscle = new Map();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>for (const sess of strengthSessions) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (const ex of sess.strength.exercises || []) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>totalVolume += volumeForExercise(ex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>const sets = countedSets(ex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>totalSetCount += sets;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>const muscle = ex.muscle || state.exerciseLibrary?.[(ex.name || "").trim()]?.muscle || "Other";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>byMuscle.set(muscle, (byMuscle.get(muscle) || 0) + sets);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const muscleSets = [...byMuscle.entries()]</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.map(([muscle, sets]) =&gt; ({ muscle, sets }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.sort((a, b) =&gt; b.sets - a.sets);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return { strengthSessionsCount: strengthSessions.length, totalVolume, totalSetCount, muscleSets };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [weekSessions, state.exerciseLibrary]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weeklyCardio = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const cardioSessions = weekSessions.filter((s) =&gt; s.type === "cardio" &amp;&amp; s.cardio);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>let minutes = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>let distanceKm = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>for (const sess of cardioSessions) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>minutes += safe(toNum(sess.cardio.minutes), 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>distanceKm += safe(toNum(sess.cardio.distanceKm), 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return { cardioSessionsCount: cardioSessions.length, minutes, distanceKm };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [weekSessions]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weeklyMacros = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const ms = state.macroEntries.filter((m) =&gt; inWeek(m.date, weekStart));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (ms.length === 0) return { days: 0, avg: null };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const sums = ms.reduce(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>(acc, m) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>acc.cal += safe(m.calories, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>acc.p += safe(m.protein, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>acc.c += safe(m.carbs, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>acc.f += safe(m.fat, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>return acc;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{ cal: 0, p: 0, c: 0, f: 0 }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>days: ms.length,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>avg: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>calories: Math.round(sums.cal / ms.length),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>protein: Math.round(sums.p / ms.length),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>carbs: Math.round(sums.c / ms.length),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>fat: Math.round(sums.f / ms.length),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.macroEntries, weekStart]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const weeklyBody = useMemo(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const bs = [...state.bodyEntries].filter((b) =&gt; inWeek(b.date, weekStart)).sort((a, b) =&gt; (a.date &lt; b.date ? -1 : 1));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (bs.length === 0) return { delta: null, start: null, end: null };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const start = bs[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const end = bs[bs.length - 1];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const delta = start.weightKg != null &amp;&amp; end.weightKg != null ? +(end.weightKg - start.weightKg).toFixed(2) : null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return { delta, start, end };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}, [state.bodyEntries, weekStart]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Export/Import ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function exportData() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const blob = new Blob([JSON.stringify(state, null, 2)], { type: "application/json" });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const url = URL.createObjectURL(blob);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const a = document.createElement("a");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>a.href = url;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>a.download = `gym-tracker-pro-v4-backup-${todayISO()}.json`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>a.click();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>URL.revokeObjectURL(url);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function importData(file) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const reader = new FileReader();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>reader.onload = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>const parsed = JSON.parse(reader.result);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>setState({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>exerciseLibrary: parsed.exerciseLibrary || {},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>templates: parsed.templates || [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>splits: parsed.splits || [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>activeSplitId: parsed.activeSplitId || null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>settings: parsed.settings || { splitMode: "calendar" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>splitCycleIndexBySplitId: parsed.splitCycleIndexBySplitId || {},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>sessions: parsed.sessions || [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>macroEntries: parsed.macroEntries || [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>bodyEntries: parsed.bodyEntries || [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} catch {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>alert("Import failed. Make sure this is a valid backup JSON.");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>reader.readAsText(file);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Progression panel ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function ProgressionPanel({ session }) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>if (session.type !== "strength" || !session.strength) return null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>const recs = (session.strength.exercises || []).map((ex) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const repTarget = toNum(ex.repTarget) ?? 8;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sets = ex.sets || [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const weights = sets.map((s) =&gt; toNum(s.weight)).filter((x) =&gt; x != null);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const lastWeight = weights.length ? weights[weights.length - 1] : null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const repsNums = sets.map((s) =&gt; toNum(s.reps)).filter((x) =&gt; x != null);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const hitTargetAllSets = repsNums.length &gt; 0 &amp;&amp; repsNums.every((r) =&gt; r &gt;= repTarget);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const missByALot = repsNums.length &gt; 0 &amp;&amp; repsNums.some((r) =&gt; r &lt;= Math.max(1, repTarget - 4));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const next = suggestNextWeight({ lastWeight, hitTargetAllSets, missByALot });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return { name: (ex.name || "Unnamed").trim() || "Unnamed", repTarget, lastWeight, next };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{ className: "mt-4 rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement("div", { className: "text-sm font-semibold" }, "Progression suggestions (1kg jumps)"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "mt-2 grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>recs.map((r, i) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ key: i, className: "text-xs text-zinc-300 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, `${r.name} (target ${r.repTarget})`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "text-zinc-400 text-right" }, r.lastWeight == null ? "Add weight" : `Next: ${r.next} kg`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ---- Render ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{ className: "max-w-5xl mx-auto px-4 py-6 md:py-10" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{ className: "flex items-start justify-between gap-4 mb-6" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement("div", { className: "text-2xl md:text-3xl font-bold tracking-tight" }, "Gym Tracker Pro (v4)"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement("div", { className: "text-zinc-400 text-sm mt-1" }, "Settings: split mode • Calendar or rolling cycle • Everything local + exportable")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "flex items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(Button, { variant: "ghost", onClick: exportData }, "Export"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement("input", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>type: "file",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>accept: "application/json",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>className: "hidden",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>id: "import-file",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>onChange: (e) =&gt; e.target.files?.[0] &amp;&amp; importData(e.target.files[0]),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; document.getElementById("import-file").click() }, "Import")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{ className: "flex flex-wrap gap-2 mb-6" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "sessions", onClick: () =&gt; setTab("sessions") }, "Track Workouts"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "templates", onClick: () =&gt; setTab("templates") }, "Templates"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "split", onClick: () =&gt; setTab("split") }, "Split"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "settings", onClick: () =&gt; setTab("settings") }, "Settings"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "history", onClick: () =&gt; setTab("history") }, "Exercise History"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "macros", onClick: () =&gt; setTab("macros") }, "Macros"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "body", onClick: () =&gt; setTab("body") }, "Weight &amp; Body Fat"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(Pill, { active: tab === "weekly", onClick: () =&gt; setTab("weekly") }, "Weekly Summary")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Settings ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "settings" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Split Settings"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-2 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Split mode"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"select",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>value: state.settings?.splitMode || "calendar",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>onChange: (e) =&gt; setState((s) =&gt; ({ ...s, settings: { ...(s.settings || {}), splitMode: e.target.value } })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "calendar" }, "Calendar (Mon–Sun)"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "cycle" }, "Rolling Cycle (Day 1..N)")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>(state.settings?.splitMode || "calendar") === "calendar"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>? "Uses your weekday to pick a day from the active split."</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>: "Uses a rolling day counter for the active split. Tap “Complete Day” to advance."</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Cycle controls"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>!state.activeSplitId</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>? React.createElement("div", { className: "text-sm text-zinc-400" }, "Select an active split first.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "text-sm font-medium" }, "Active split cycle position"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, `Current day index: ${safe(state.splitCycleIndexBySplitId?.[state.activeSplitId], 0) + 1}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "flex gap-2 mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setCycleIndexForActiveSplit(Math.max(0, getCycleIndexForActiveSplit() - 1)) }, "Back"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setCycleIndexForActiveSplit(getCycleIndexForActiveSplit() + 1) }, "Forward"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; setCycleIndexForActiveSplit(0) }, "Reset")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Sessions ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "sessions" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "flex items-start justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "font-semibold" }, "Today’s Plan"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, activeSplit ? `Active split: ${activeSplit.name}` : "No active split selected")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "flex items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setTab("settings") }, "Settings"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setTab("split") }, "Edit split")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>!plan</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement("div", { className: "text-sm text-zinc-400 mt-3" }, "No plan available. Choose an active split and assign templates.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", { className: "text-sm font-semibold" }, plan.title),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>plan.mode === "cycle" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ className: "flex flex-wrap gap-2 mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setCycleIndexForActiveSplit(Math.max(0, getCycleIndexForActiveSplit() - 1)) }, "Back"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(Button, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>onClick: () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>const daysLen = (activeSplit?.days || []).length || 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>setCycleIndexForActiveSplit((getCycleIndexForActiveSplit() + 1) % daysLen);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>}, "Complete Day → Next"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setCycleIndexForActiveSplit(0) }, "Reset Cycle")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>plan.templates.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>? React.createElement("div", { className: "text-sm text-zinc-400 mt-2" }, "No templates assigned to this day.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>{ className: "flex flex-wrap gap-2 mt-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>plan.templates.map((t) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(Button, { key: t.id, variant: "ghost", onClick: () =&gt; addSessionFromTemplate(t.id) }, "Start: " + t.name)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Sessions"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>sortedSessions.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No sessions yet", hint: "Start from Today’s Plan or from a template." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>sortedSessions.map((sess) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: sess.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>{ className: "flex items-start justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", { className: "font-semibold" }, `${sess.name} — ${sess.type === "strength" ? "Strength" : "Cardio"}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-0.5" }, sess.date)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "flex items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; deleteSession(sess.id) }, "Delete")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Label, null, "Notes"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(TextArea, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>rows: 2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>placeholder: "How it felt, cues, next time…",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>value: sess.notes || "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>onChange: (e) =&gt; updateSession(sess.id, (s) =&gt; ({ ...s, notes: e.target.value })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>sess.type === "cardio" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>{ className: "mt-3 grid md:grid-cols-4 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", null, React.createElement(Label, null, "Modality"), React.createElement(Input, { value: sess.cardio?.modality || "", onChange: (e) =&gt; updateSession(sess.id, (s) =&gt; ({ ...s, cardio: { ...s.cardio, modality: e.target.value } })) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", null, React.createElement(Label, null, "Minutes"), React.createElement(Input, { inputMode: "numeric", value: sess.cardio?.minutes ?? "", onChange: (e) =&gt; updateSession(sess.id, (s) =&gt; ({ ...s, cardio: { ...s.cardio, minutes: e.target.value } })) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", null, React.createElement(Label, null, "Distance (km)"), React.createElement(Input, { inputMode: "decimal", value: sess.cardio?.distanceKm ?? "", onChange: (e) =&gt; updateSession(sess.id, (s) =&gt; ({ ...s, cardio: { ...s.cardio, distanceKm: e.target.value } })) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement("div", null, React.createElement(Label, null, "Intensity"), React.createElement(Input, { placeholder: "e.g., Zone 2 / Intervals", value: sess.cardio?.intensity ?? "", onChange: (e) =&gt; updateSession(sess.id, (s) =&gt; ({ ...s, cardio: { ...s.cardio, intensity: e.target.value } })) }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>sess.type === "strength" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>{ className: "mt-4 grid gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>{ className: "flex justify-end" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>React.createElement(Button, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>variant: "ghost",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>onClick: () =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>exercises: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>...(s.strength?.exercises || []),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>{ id: uid(), name: "", muscle: "Other", repTarget: 8, sets: [{ id: uid(), reps: "", weight: "", rpe: "" }] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>children: "+ Exercise",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>(sess.strength?.exercises || []).map((ex) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>{ key: ex.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>{ className: "grid md:grid-cols-12 gap-2 items-end" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>{ className: "md:col-span-5" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Label, null, "Exercise"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>value: ex.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>placeholder: "e.g., Bench Press",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>onChange: (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>const newName = e.target.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>const trimmed = (newName || "").trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>const autoMuscle = trimmed ? state.exerciseLibrary?.[trimmed]?.muscle : null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>x.id === ex.id ? { ...x, name: newName, muscle: autoMuscle || x.muscle || "Other" } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>}));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>if (trimmed) ensureLibraryForExercise(trimmed, autoMuscle || ex.muscle || "Other");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>{ className: "md:col-span-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Label, null, "Muscle"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>"select",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>value: ex.muscle || "Other",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>onChange: (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>const mus = e.target.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>exercises: s.strength.exercises.map((x) =&gt; (x.id === ex.id ? { ...x, muscle: mus } : x)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>ensureLibraryForExercise(ex.name, mus);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>MUSCLES.map((m) =&gt; React.createElement("option", { key: m, value: m }, m))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>{ className: "md:col-span-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Label, null, "Rep target"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>inputMode: "numeric",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>value: ex.repTarget ?? 8,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>onChange: (e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>exercises: s.strength.exercises.map((x) =&gt; (x.id === ex.id ? { ...x, repTarget: e.target.value } : x)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>{ className: "md:col-span-2 flex gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Button, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>variant: "ghost",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>onClick: () =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>x.id === ex.id ? { ...x, sets: [...(x.sets || []), { id: uid(), reps: "", weight: "", rpe: "" }] } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>children: "+ Set",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(Button, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>variant: "danger",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>onClick: () =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>strength: { ...s.strength, exercises: s.strength.exercises.filter((x) =&gt; x.id !== ex.id) },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>children: "Remove",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>{ className: "mt-3 grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>(ex.sets || []).map((set, idx) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>{ key: set.id, className: "grid grid-cols-12 gap-2 items-center" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement("div", { className: "col-span-2 text-xs text-zinc-400" }, "Set " + (idx + 1)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>{ className: "col-span-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>inputMode: "numeric",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>placeholder: "Reps",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>value: set.reps ?? "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>onChange: (e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>x.id === ex.id ? { ...x, sets: x.sets.map((sa) =&gt; (sa.id === set.id ? { ...sa, reps: e.target.value } : sa)) } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>{ className: "col-span-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>inputMode: "decimal",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>placeholder: "Weight (kg)",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>value: set.weight ?? "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>onChange: (e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>x.id === ex.id ? { ...x, sets: x.sets.map((sa) =&gt; (sa.id === set.id ? { ...sa, weight: e.target.value } : sa)) } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>{ className: "col-span-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>inputMode: "decimal",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>placeholder: "RPE",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>value: set.rpe ?? "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>onChange: (e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>x.id === ex.id ? { ...x, sets: x.sets.map((sa) =&gt; (sa.id === set.id ? { ...sa, rpe: e.target.value } : sa)) } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>{ className: "col-span-2 text-right" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>Button,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>variant: "danger",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>onClick: () =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>updateSession(sess.id, (s) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>...s,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>strength: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>...s.strength,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>exercises: s.strength.exercises.map((x) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                      </span>x.id === ex.id ? { ...x, sets: x.sets.filter((sa) =&gt; sa.id !== set.id) } : x</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                    </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>"✕"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>{ className: "mt-2 text-xs text-zinc-400 flex items-center justify-between" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement("div", null, `Sets: ${countedSets(ex)} • Volume: ${Math.round(volumeForExercise(ex))}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>React.createElement("div", null, ex.name ? "" : "Name the exercise to track it cleanly")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(ProgressionPanel, { session: sess })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Templates ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "templates" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Create template"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>{ className: "grid md:grid-cols-3 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Template type"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"select",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>value: tplType,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>onChange: (e) =&gt; setTplType(e.target.value),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "strength" }, "Strength"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "cardio" }, "Cardio")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-2" }, React.createElement(Label, null, "Template name"), React.createElement(Input, { value: tplName, onChange: (e) =&gt; setTplName(e.target.value) }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>tplType === "strength"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement(Label, null, "Exercises (one per line). Format: Exercise,repTarget,Muscle"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement(TextArea, { rows: 5, value: tplExercises, onChange: (e) =&gt; setTplExercises(e.target.value) }),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-1" }, `Muscle options: ${MUSCLES.join(", ")}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "mt-3 grid md:grid-cols-3 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", null, React.createElement(Label, null, "Modality"), React.createElement(Input, { value: tplCardioMod, onChange: (e) =&gt; setTplCardioMod(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", null, React.createElement(Label, null, "Minutes"), React.createElement(Input, { inputMode: "numeric", value: tplCardioMin, onChange: (e) =&gt; setTplCardioMin(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", null, React.createElement(Label, null, "Distance (km) optional"), React.createElement(Input, { inputMode: "decimal", value: tplCardioDist, onChange: (e) =&gt; setTplCardioDist(e.target.value) }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "mt-4 flex justify-end" }, React.createElement(Button, { onClick: addTemplate, disabled: !tplName.trim() }, "Save template"))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Your templates"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>state.templates.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No templates yet", hint: "Create one above." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>state.templates.map((t) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: t.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-4 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "font-semibold" }, `${t.name}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, t.type === "strength" ? "Strength" : "Cardio")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "flex items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; addSessionFromTemplate(t.id) }, "Start"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; deleteTemplate(t.id) }, "Delete")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Split ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "split" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Active Split"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-3 gap-3 items-end" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Select active split"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"select",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>value: state.activeSplitId || "",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>onChange: (e) =&gt; setState((s) =&gt; ({ ...s, activeSplitId: e.target.value || null })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "" }, "—"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>(state.splits || []).map((sp) =&gt; React.createElement("option", { key: sp.id, value: sp.id }, sp.name))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "New split"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "flex gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement(Input, { placeholder: "e.g., My 5-day split", value: newSplitName, onChange: (e) =&gt; setNewSplitName(e.target.value) }),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement(Button, { onClick: createSplit, disabled: !newSplitName.trim() }, "Create")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>!activeSplit</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>? React.createElement(Card, null, React.createElement(Empty, { title: "No active split", hint: "Select or create a split above." }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "flex items-start justify-between gap-3 mb-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement("div", { className: "font-semibold" }, `Edit: ${activeSplit.name}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, "Assign templates to each day (7 slots by default, but you can still use cycle mode too)")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; deleteSplit(activeSplit.id) }, "Delete split")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "grid gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>(activeSplit.days || []).map((day, idx) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const weekdayLabel = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][idx] || `Day ${idx+1}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: day.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "grid md:grid-cols-12 gap-2 items-end" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "md:col-span-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(Label, null, `${weekdayLabel} name`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(Input, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>value: day.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>onChange: (e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>updateSplit(activeSplit.id, (sp) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>...sp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>days: sp.days.map((d) =&gt; (d.id === day.id ? { ...d, name: e.target.value } : d)),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>})),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "md:col-span-8" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>React.createElement(Label, null, "Templates for this day"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                              </span>state.templates.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>? React.createElement("div", { className: "text-sm text-zinc-400" }, "Create templates first.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>{ className: "flex flex-wrap gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>state.templates.map((t) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>const checked = (day.templateIds || []).includes(t.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>return React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>"label",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>{ key: t.id, className: "flex items-center gap-2 text-xs border border-zinc-800 rounded-full px-3 py-2 bg-zinc-950/60 cursor-pointer" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement("input", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>type: "checkbox",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>checked,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>onChange: (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>const on = e.target.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>updateSplit(activeSplit.id, (sp) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>...sp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>days: sp.days.map((d) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>if (d.id !== day.id) return d;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>const ids = new Set(d.templateIds || []);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>if (on) ids.add(t.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>else ids.delete(t.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                                </span>return { ...d, templateIds: [...ids] };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                              </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                            </span>}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                          </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                        </span>React.createElement("span", null, t.name)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                      </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                    </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-2" }, "Splits"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>(state.splits || []).length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No splits", hint: "Create one above." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>(state.splits || []).map((sp) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: sp.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-sm font-medium" }, sp.name),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-1" }, sp.id === state.activeSplitId ? "Active" : "Inactive")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", { className: "flex items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setState((s) =&gt; ({ ...s, activeSplitId: sp.id })) }, "Set active")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- History ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "history" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Exercise History"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-3 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Search"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Input, { placeholder: "Type to filter…", value: historySearch, onChange: (e) =&gt; setHistorySearch(e.target.value) })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(Label, null, "Select exercise"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"select",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>className:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"w-full rounded-xl bg-zinc-950 border border-zinc-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-600",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>value: historyExercise,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>onChange: (e) =&gt; setHistoryExercise(e.target.value),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>React.createElement("option", { value: "" }, "—"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>exerciseNames.filter((n) =&gt; n.toLowerCase().includes(historySearch.toLowerCase())).map((n) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement("option", { key: n, value: n }, n)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>historyExercise &amp;&amp; historySuggestion</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement("div", { className: "mt-3 text-sm text-zinc-300" }, `Suggested next load: ${historySuggestion.next} kg (last: ${historySuggestion.lastWeight} kg)`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement("div", { className: "mt-3 text-sm text-zinc-400" }, historyExercise ? "Log weights/reps to get a suggestion." : "Pick an exercise to see history.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, historyExercise ? `Last 20: ${historyExercise}` : "History"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>!historyExercise</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "Select an exercise", hint: "Use the dropdown above." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: historyRows.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No entries yet", hint: "Log this exercise in a Strength session." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>historyRows.map((r, i) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: i, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-sm font-medium" }, `${r.date} — ${r.session}`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, `Best: ${r.bestWeight} kg x ${r.bestReps} • Sets: ${r.setsCount} • Volume: ${r.volume}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Macros ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "macros" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Log daily macros"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-5 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-2" }, React.createElement(Label, null, "Date"), React.createElement(Input, { type: "date", value: macroDate, onChange: (e) =&gt; setMacroDate(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Calories"), React.createElement(Input, { inputMode: "numeric", value: cal, onChange: (e) =&gt; setCal(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Protein (g)"), React.createElement(Input, { inputMode: "numeric", value: p, onChange: (e) =&gt; setP(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Carbs (g)"), React.createElement(Input, { inputMode: "numeric", value: c, onChange: (e) =&gt; setC(e.target.value) }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-5 gap-3 mt-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-2" }, React.createElement(Label, null, "Fat (g)"), React.createElement(Input, { inputMode: "numeric", value: f, onChange: (e) =&gt; setF(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "md:col-span-3 flex items-end justify-end" }, React.createElement(Button, { onClick: upsertMacros }, "Save / Update"))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "History"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>sortedMacros.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No macro entries yet", hint: "Log a day above." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>sortedMacros.map((m) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: m.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-sm font-medium" }, m.date),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, `${m.calories ?? ""} kcal • P ${m.protein ?? ""} • C ${m.carbs ?? ""} • F ${m.fat ?? ""}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; deleteMacro(m.id) }, "Delete")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Body ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "body" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Log body metrics"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-3 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Date"), React.createElement(Input, { type: "date", value: bodyDate, onChange: (e) =&gt; setBodyDate(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Weight (kg)"), React.createElement(Input, { inputMode: "decimal", value: weight, onChange: (e) =&gt; setWeight(e.target.value) })),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", null, React.createElement(Label, null, "Body fat (%)"), React.createElement(Input, { inputMode: "decimal", value: bf, onChange: (e) =&gt; setBf(e.target.value) }))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "mt-4 flex justify-end" }, React.createElement(Button, { onClick: upsertBody }, "Save / Update"))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "History"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>sortedBody.length === 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>? React.createElement(Empty, { title: "No body entries yet", hint: "Log a day above." })</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>: React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>{ className: "grid gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>sortedBody.map((e) =&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>{ key: e.id, className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3 flex items-center justify-between gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement("div", null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-sm font-medium" }, e.date),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>React.createElement("div", { className: "text-xs text-zinc-400 mt-1" }, `Weight: ${e.weightKg ?? ""} kg • Body fat: ${e.bodyFatPct ?? ""}%`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                          </span>React.createElement(Button, { variant: "danger", onClick: () =&gt; deleteBody(e.id) }, "Delete")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>// ---- Weekly ----</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tab === "weekly" &amp;&amp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>"div",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>{ className: "grid gap-4" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Pick a week (Monday start)"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "flex flex-wrap items-center gap-2" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setWeekStart(addDaysISO(weekStart, -7)) }, "← Prev"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement(Input, { type: "date", value: weekStart, onChange: (e) =&gt; setWeekStart(startOfWeekISO(e.target.value)), className: "max-w-[220px]" }),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement(Button, { variant: "ghost", onClick: () =&gt; setWeekStart(addDaysISO(weekStart, 7)) }, "Next →")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-2" }, `Week: ${weekStart} to ${addDaysISO(weekStart, 6)}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>React.createElement(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Card,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "font-semibold mb-3" }, "Summary"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>React.createElement("div", { className: "grid md:grid-cols-3 gap-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-400" }, "Strength sessions"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xl font-semibold" }, weeklyStrength.strengthSessionsCount),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-1" }, `Sets: ${weeklyStrength.totalSetCount} • Volume: ${Math.round(weeklyStrength.totalVolume)}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-400" }, "Cardio sessions"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xl font-semibold" }, weeklyCardio.cardioSessionsCount),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-1" }, `Minutes: ${Math.round(weeklyCardio.minutes)} • Km: ${weeklyCardio.distanceKm.toFixed(1)}`)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>React.createElement("div", { className: "rounded-2xl border border-zinc-800 bg-zinc-950/40 p-3" },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-400" }, "Body change"),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xl font-semibold" }, weeklyBody.delta == null ? "—" : `${weeklyBody.delta &gt; 0 ? "+" : ""}${weeklyBody.delta} kg`),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>React.createElement("div", { className: "text-xs text-zinc-500 mt-1" }, weeklyBody.start?.weightKg != null &amp;&amp; weeklyBody.end?.weightKg != null ? `${weeklyBody.start.date}: ${weeklyBody.start.weightKg} → ${weeklyBody.end.date}: ${weeklyBody.end.weightKg}` : "Add weight entries")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>),</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>React.createElement("div", { className: "mt-6 text-xs text-zinc-500" }, "Data is stored on this device (localStorage). Export for backups or moving phones.")</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));</span></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>if ("serviceWorker" in navigator) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>window.addEventListener("load", () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>navigator.serviceWorker.register("./sw.js");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
